createAccount=INSERT INTO USERS (USERNAME,PASSWORD,EMAIL) VALUES (?,?,?)
checkAccount=SELECT USERNAME FROM USERS WHERE USERNAME = ?
checkPassword=SELECT USERNAME FROM USERS WHERE USERNAME = ? AND PASSWORD = ?
logon=INSERT INTO ONLINE_USERS (USERNAME,IPADDRESS,PORT,ACTION) VALUES (?,?,?,'LOGON')
logoff=INSERT INTO ONLINE_USERS (USERNAME,IPADDRESS,PORT,ACTION) VALUES (?,?,?,'LOGOFF')
addFile=INSERT INTO SHAREDFILES (FOLDERID,FILENAME,FILESIZE) VALUES ( ?,?,?)
addFolder=INSERT INTO SHAREDFOLDERS (PATH, ACCOUNTNAME ,PARENTFOLDERID,FOLDERNAME) VALUES ( ?,?,?,?)
getLastFolderId=SELECT SHAREDFOLDER_SEQ.CURRVAL FROM dual
basicSearch=WITH y AS (SELECT x.USERNAME FROM ONLINE_USERS x WHERE x.ACTION='LOGON' AND x.USERNAME NOT IN ( SELECT USERNAME FROM ONLINE_USERS WERE ACTION = 'LOGOFF' AND TIMESTAMP> x.TIMESTAMP AND USERNAME=x.USERNAME ) ) SELECT fi.FOLDERID,FILENAME,ACCOUNTNAME,FILESIZE FROM SHAREDFILES fi JOIN SHAREDFOLDERS fo ON fo.FOLDERID=fi.FOLDERID WHERE lower(FILENAME) LIKE ? AND fo.ACCOUNTNAME in ( SELECT y.USERNAME FROM y )
filename=FILENAME
filesize=FILESIZE
accountname=ACCOUNTNAME
ip=IPADDRESS
port=PORT
path=PATH
parentid=FOLDERID
deletefile=DELETE FROM SHAREDFILES WHERE FOLDERID = ? AND FILENAME = ? AND FILESIZE = ?
deletefolder=DELETE FROM SHAREDFOLDERS WHERE FOLDERID = ? OR PARENTFOLDERID = ?
getdownloadinformation=SELECT PATH FROM SHAREDFILES fi JOIN SHAREDFOLDERS fo ON fo.FOLDERID=fi.FOLDERID WHERE fi.FILENAME = ? AND fo.ACCOUNTNAME = ? AND fi.FILESIZE = ? AND fi.FOLDERID= ?
getPortAndAddress=SELECT ipaddress,port FROM online_users WHERE username = ? AND ACTION = 'LOGON' ORDER BY timestamp DESC
ERROR_Database=The server encountered a database error.